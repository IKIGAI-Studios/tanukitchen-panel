# url-clean
> [Normalize](https://en.wikipedia.org/wiki/URL_normalization) a URL

[![version](https://img.shields.io/npm/v/url-clean.svg)](https://www.npmjs.org/package/url-clean)
[![downloads](https://img.shields.io/npm/dt/url-clean.svg)](https://www.npmjs.org/package/url-clean)
[![node](https://img.shields.io/node/v/url-clean.svg)](https://nodejs.org/)
[![status](https://gitlab.com/autokent/url-clean/badges/master/pipeline.svg)](https://gitlab.com/autokent/url-clean/pipelines)

> Fork of [normalize-url](https://www.npmjs.com/package/normalize-url)

**Added extra test cases, fixed minor bugs and reduced dependency.**

Useful when you need to display, store, deduplicate, sort, compare, etc, URLs.


## Install

```
$ npm install url-clean
```


## Usage

```js
const clean = require('url-clean');

clean('sindresorhus.com');
//=> 'http://sindresorhus.com'

clean('HTTP://xn--xample-hva.com:80/?b=bar&a=foo');
//=> 'http://Ãªxample.com/?a=foo&b=bar'
```


## API

### clean(url, [options])

#### url

Type: `string`

URL to normalize.

#### options

Type: `Object`

##### normalizeProtocol

Type: `boolean`<br>
Default: `true`

Prepend `http:` to the URL if it's protocol-relative.

```js
clean('//sindresorhus.com:80/');
//=> 'http://sindresorhus.com'

clean('//sindresorhus.com:80/', {normalizeProtocol: false});
//=> '//sindresorhus.com'
```

##### normalizeHttps

Type: `boolean`<br>
Default: `false`

Normalize `https:` URLs to `http:`.

```js
clean('https://sindresorhus.com:80/');
//=> 'https://sindresorhus.com'

clean('https://sindresorhus.com:80/', {normalizeHttps: true});
//=> 'http://sindresorhus.com'
```

##### stripFragment

Type: `boolean`<br>
Default: `true`

Remove the fragment at the end of the URL.

```js
clean('sindresorhus.com/about.html#contact');
//=> 'http://sindresorhus.com/about.html'

clean('sindresorhus.com/about.html#contact', {stripFragment: false});
//=> 'http://sindresorhus.com/about.html#contact'
```

##### stripWWW

Type: `boolean`<br>
Default: `true`

Remove `www.` from the URL.

```js
clean('http://www.sindresorhus.com/about.html#contact');
//=> 'http://sindresorhus.com/about.html#contact'

clean('http://www.sindresorhus.com/about.html#contact', {stripWWW: false});
//=> 'http://www.sindresorhus.com/about.html#contact'
```

##### removeQueryParameters

Type: `Array<RegExp|string>`<br>
Default: `[/^utm_\w+/i]`

Remove query parameters that matches any of the provided strings or regexes.

```js
clean('www.sindresorhus.com?foo=bar&ref=test_ref', {
	removeQueryParameters: ['ref']
});
//=> 'http://sindresorhus.com/?foo=bar'
```

##### removeTrailingSlash

Type: `boolean`<br>
Default: `true`

Remove trailing slash.

```js
clean('http://sindresorhus.com/redirect/');
//=> 'http://sindresorhus.com/redirect'

clean('http://sindresorhus.com/redirect/', {removeTrailingSlash: false});
//=> 'http://sindresorhus.com/redirect/'

clean('http://sindresorhus.com/', {removeTrailingSlash: false});
//=> 'http://sindresorhus.com/'
```

##### removeDirectoryIndex

Type: `boolean` `Array<RegExp|string>`<br>
Default: `false`

Remove the default directory index file from path that matches any of the provided strings or regexes. When `true`, the regex `/^index\.[a-z]+$/` is used.

```js
clean('www.sindresorhus.com/foo/default.php', {
	removeDirectoryIndex: [/^default\.[a-z]+$/]
});
//=> 'http://sindresorhus.com/foo'
```

##### sortQueryParameters

Type: `boolean`<br>
Default: `true`

Sort the query parameters alphabetically by key.

```js
clean('www.sindresorhus.com?b=two&a=one&c=three', {
	sortQueryParameters: false
});
//=> 'http://sindresorhus.com/?b=two&a=one&c=three'
```


##### removeJSessionId

Type: `boolean`<br>
Default: `true`

remove the Spring JSessionId

```js
clean('www.sindresorhus.com;jsessionid=CEC3FD6EBB4FE3CBBE37AE3322B23051', {
	removeJSessionId: true
});
//=> 'http://sindresorhus.com'
```


